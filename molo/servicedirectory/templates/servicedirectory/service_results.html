{% extends 'base.html' %}

{% block content %}

    <form action="{% url 'service-results' %}" method="get" class="sd-search-form">

        <input type="text" name="search" value="{{ search_term }}" />
        <input type="submit" value="Search" />

        <input type="hidden" name="location" value="{{ location_term }}" />
        <input type="hidden" name="place_id" value="{{ place_id }}" />

        {% if place_latlng %}
        <input type="hidden" name="place_latlng" value="{{ place_latlng }}">
        {% endif %}

        {% if place_formatted_address %}
        <input type="hidden" name="place_formatted_address" value="{{ place_formatted_address }}">
        {% endif %}

    </form>

    <span class="sd-location">
        {{ place_formatted_address }} <a href="{{ change_location_url }}">Change area</a>
    </span>
    <br/>

    <span class="sd-num-results">{{ search_results | length }} Services</span>
    <br/>

    <hr/>

    {% if not search_results %}
        <span class="sd-no-search-results">
            We're sorry, but we couldn't find any services related to your search.
            Please <a href="{% url 'home' %}">click here</a> to see example keywords and categories, or change your search and try again.
        </span>
    {% endif %}

    {% for service in search_results %}

        <a href="{% url 'service-detail' service.id %}">
            <h1 class="sd-heading svc-org-name">
                {{ service.name }} - {{ service.organisation.name }}
            </h1>
        </a>

        <p class="sd-service-keywords">
            {{ service.keywords|join:", " }}
        </p>

        <p class="sd-service-location">
            {{ service.organisation.address }} | {{ service.distance }}
        </p>

        <hr/>

    {% endfor %}

{% endblock %}
